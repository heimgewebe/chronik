ai_context_version: 1.0

project:
  name: chronik
  summary: Event ingest and persistence hub (formerly leitstand).
  role: central_event_store
  primary_language: python
  visibility: internal

dependencies:
  internal:
    - name: contracts
      relationship: uses
      interface:
        - json_schema
  external:
    - name: fastapi
    - name: uvicorn
    - name: httpx
    - name: filelock

architecture:
  entrypoints:
    - app.py
  key_paths:
    - path: app.py
      purpose: HTTP ingest + validation
    - path: storage.py
      purpose: event persistence
  data_flow:
    input: HTTP POST /v1/ingest
    processing: JSON Schema validation
    output: storage in domain-specific jsonl files

conventions:
  branching: "main, feature/*, hotfix/*"
  commit_prefix: "chronik"
  ci_platform: github_actions

documentation:
  adr: docs/adr/
  runbook: docs/runbook.md

ai_guidance:
  do:
    - pull validation rules from contracts and reject non-conforming events
    - prefer structured logs via tracing; avoid println! in hot paths
  dont:
    - accept payloads without schema validation
